(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{iLNO:function(a,t,o){"use strict";o.r(t),o.d(t,"GradeModule",(function(){return O}));var e=o("ofXK"),i=o("tk/3"),r=o("3Pt+"),b=o("fXoL"),n=o("kcBg"),c=o("rwds"),d=o("3aJx"),l=o("aSUU"),s=o("tyNb"),u=o("KmtZ");function m(a,t){if(1&a&&(b.Nb(0,"option",56),b.kc(1),b.Mb()),2&a){const a=t.$implicit,o=b.Wb();b.ac("value",a.id),b.xb(1),b.lc(o.formatarDate(a.dia)+" - "+a.observacao)}}function g(a,t){if(1&a&&(b.Nb(0,"option",56),b.kc(1),b.Mb()),2&a){const a=t.$implicit,o=b.Wb();b.ac("value",a.id),b.xb(1),b.lc(o.formatarDate(a.dia)+" - "+a.observacao)}}function M(a,t){if(1&a&&(b.Nb(0,"option",56),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.id),b.xb(1),b.lc(a.descricao)}}function N(a,t){if(1&a&&(b.Nb(0,"option",56),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.id),b.xb(1),b.lc(a.descricao)}}let f=(()=>{class a{constructor(a,t,o,e,i,r,b){this.fb=a,this.servicoService=t,this.unidadeService=o,this.calendarioService=e,this.gradeService=i,this.route=r,this.globalService=b,this.mostrarMens=!1}ngOnInit(){this.comboBox();const a=this.route.snapshot.params;null!=a.id&&this.gradeService.loadById(a.id).subscribe(a=>{this.updateGradeForm(a),this.calcula()}),this.gradeForm=this.fb.group({id:[null,[]],dataInicial:["",[]],dataFinal:["",[]],horaInicial:["",[]],horaFinal:["",[]],intervalo:["",[]],correcaoHora:["",[]],configurado:["",[]],gerado:["",[]],unidade:["",[]],servico:["",[]],quantidade:["",[]]})}calcula(){let a=this.gradeForm.get("horaInicial").value,t=this.gradeForm.get("horaFinal").value,o=this.gradeForm.get("intervalo").value,e=a.substring(0,2),i=a.substring(3,5),r=60*parseInt(e)+parseInt(i),b=t.substring(0,2),n=t.substring(3,5),c=60*parseInt(b)+parseInt(n)-r,d=c%60,l=c/o,s=c*l/60,u=c/s;this.horaTotal=c/60,this.minutoTotal=d,this.mediaAtenHora=Math.trunc(l),this.totAtend=Math.trunc(s),this.corrVaga=Math.trunc(u),this.gradeForm.get("quantidade").setValue(Math.trunc(s)),this.gradeForm.get("correcaoHora").setValue(Math.trunc(u))}updateGradeForm(a){this.gradeForm.patchValue(a)}formatarDate(a){let t="",o=a.substring(8,10),e=a.substring(5,7),i=a.substring(0,4);return 1==o.length&&(o="0"+o),1==e.length&&(e="0"+e),t=o+"/"+e+"/"+i,t}comboBox(){this.calendarioService.listarDiasAtivos().subscribe(a=>this.calendarios=a),this.unidadeService.listUnidadeGenerica(this.globalService.getRole(),this.globalService.getUnidadeId()).subscribe(a=>this.unidades=a),this.servicoService.listServico().subscribe(a=>this.servicos=a)}onSubmit(){this.gradeForm.valid&&this.gradeService.saveGradeMultipla(this.gradeForm.value).subscribe(a=>{this.globalService.saveShow("Gerado com Sucesso!","Grade em demanda.")}),this.gradeForm.reset(),this.horaTotal="",this.minutoTotal="",this.mediaAtenHora="",this.totAtend="",this.corrVaga=""}}return a.\u0275fac=function(t){return new(t||a)(b.Ib(r.b),b.Ib(n.a),b.Ib(c.a),b.Ib(d.a),b.Ib(l.a),b.Ib(s.a),b.Ib(u.a))},a.\u0275cmp=b.Cb({type:a,selectors:[["app-grade-multi-form"]],decls:117,vars:10,consts:[[1,"col-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/grade"],[1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-md"],[1,"h3","border-left","pl-2"],["type","button","routerLink","/grade",1,"btn","btn-warning","float-right"],[1,"fas","fa-backward"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"card",2,"box-shadow","5px 5px 10px #000"],[1,"card-header"],[1,"card-body"],[1,"form-row","col-md-12"],[1,"form-group","col-md-2"],["for","id"],["type","text","id","id","formControlName","id","readonly","",1,"form-control"],["for","d1"],["id","d1","formControlName","dataInicial",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","d2"],["id","d2","formControlName","dataFinal",1,"form-control"],[1,"form-group","col-md-3"],["for","hInicial"],["id","hInicial","type","time","formControlName","horaInicial",1,"form-control"],["for","hFinal"],["id","hFinal","type","time","formControlName","horaFinal",1,"form-control"],["for","inter"],["id","inter","type","number","formControlName","intervalo",1,"form-control",3,"blur"],[1,"form-group","col-md-4"],["for","unidade"],["id","unidade","formControlName","unidade",1,"form-control"],["for","comboServ"],["id","comboServ","formControlName","servico",1,"form-control"],["for","quant"],["id","quant","type","number","formControlName","quantidade","readonly","readonly",1,"form-control"],[1,"form-row","col-md-12","d-flex","justify-content-center"],["id","horaTotal",2,"color","blue"],["id","minutoTotal",2,"color","red"],["id","mediaAtenHora",2,"color","green"],["id","totAtend",2,"color","Black"],["id","corrVaga",2,"color","Black"],["id","ModalSalvar","tabindex","-1","role","dialog","aria-labelledby","TituloModalCentralizado","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","TituloModalCentralizado",1,"modal-title"],[1,"modal-body",2,"font-weight","bold"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"fas","fa-window-close"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-save"],["type","button","id","modal","data-toggle","modal","data-target","#ModalSalvar",1,"btn","btn-success","float-right","mt-2"],[3,"value"]],template:function(a,t){1&a&&(b.Nb(0,"div",0),b.Nb(1,"nav"),b.Nb(2,"ol",1),b.Nb(3,"li",2),b.Nb(4,"a",3),b.kc(5,"In\xedcio"),b.Mb(),b.Mb(),b.Nb(6,"li",2),b.Nb(7,"a",4),b.kc(8,"Listagem"),b.Mb(),b.Mb(),b.Nb(9,"li",5),b.kc(10,"Grade"),b.Mb(),b.Mb(),b.Mb(),b.Nb(11,"div",6),b.Nb(12,"div",7),b.Nb(13,"h1",8),b.kc(14," Cadastro da Grade de Agendamento por Demanda "),b.Mb(),b.Mb(),b.Nb(15,"div",7),b.Nb(16,"button",9),b.Jb(17,"i",10),b.kc(18,"\xa0Voltar "),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"form",11),b.Nb(20,"div",12),b.Nb(21,"div",13),b.kc(22," Formul\xe1rio para cadastro da Grade de Atendimento por demanda "),b.Mb(),b.Nb(23,"div",14),b.Nb(24,"div",15),b.Nb(25,"div",16),b.Nb(26,"label",17),b.kc(27,"Identificador:"),b.Mb(),b.Jb(28,"input",18),b.Mb(),b.Nb(29,"div",16),b.Nb(30,"label",19),b.kc(31,"Data Incial:"),b.Mb(),b.Nb(32,"select",20),b.jc(33,m,2,2,"option",21),b.Mb(),b.Mb(),b.Nb(34,"div",16),b.Nb(35,"label",22),b.kc(36,"Data Final:"),b.Mb(),b.Nb(37,"select",23),b.jc(38,g,2,2,"option",21),b.Mb(),b.Mb(),b.Nb(39,"div",24),b.Nb(40,"label",25),b.kc(41,"Hora Inicial:"),b.Mb(),b.Jb(42,"input",26),b.Mb(),b.Nb(43,"div",24),b.Nb(44,"label",27),b.kc(45,"Hora Final:"),b.Mb(),b.Jb(46,"input",28),b.Mb(),b.Mb(),b.Nb(47,"div",15),b.Nb(48,"div",16),b.Nb(49,"label",29),b.kc(50,"Intervalo de aten. (Minutos):"),b.Mb(),b.Nb(51,"input",30),b.Ub("blur",(function(){return t.calcula()})),b.Mb(),b.Mb(),b.Nb(52,"div",31),b.Nb(53,"label",32),b.kc(54,"Unidades:"),b.Mb(),b.Nb(55,"select",33),b.jc(56,M,2,2,"option",21),b.Mb(),b.Mb(),b.Nb(57,"div",24),b.Nb(58,"label",34),b.kc(59,"Servi\xe7o:"),b.Mb(),b.Nb(60,"select",35),b.jc(61,N,2,2,"option",21),b.Mb(),b.Mb(),b.Nb(62,"div",24),b.Nb(63,"label",36),b.kc(64,"Total de atendimento:"),b.Mb(),b.Jb(65,"input",37),b.Mb(),b.Mb(),b.Nb(66,"div",38),b.Nb(67,"div",24),b.Nb(68,"div",12),b.Nb(69,"div",13),b.kc(70," Resumo da grade. "),b.Mb(),b.Nb(71,"div",14),b.Nb(72,"div",38),b.Nb(73,"strong",39),b.kc(74),b.Mb(),b.Nb(75,"span"),b.kc(76,"\xa0Horas"),b.Mb(),b.Mb(),b.Nb(77,"div",38),b.Nb(78,"strong",40),b.kc(79),b.Mb(),b.Nb(80,"span"),b.kc(81,"\xa0Minutos"),b.Mb(),b.Mb(),b.Nb(82,"div",38),b.kc(83," M\xe9dia: \xa0"),b.Nb(84,"strong",41),b.kc(85),b.Mb(),b.Nb(86,"span"),b.kc(87,"\xa0Atend./Hora"),b.Mb(),b.Mb(),b.Nb(88,"div",38),b.kc(89," Total de atendimento:\xa0"),b.Nb(90,"strong",42),b.kc(91),b.Mb(),b.Mb(),b.Nb(92,"div",38),b.kc(93," Intervalo:\xa0"),b.Nb(94,"strong",43),b.kc(95),b.Mb(),b.Nb(96,"strong"),b.kc(97,"\xa0min"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(98,"div",44),b.Nb(99,"div",45),b.Nb(100,"div",46),b.Nb(101,"div",47),b.Nb(102,"h5",48),b.kc(103," Vamos l\xe1! "),b.Mb(),b.Mb(),b.Nb(104,"div",49),b.kc(105," Confirmar gera\xe7\xe3o da grade de atendimento? "),b.Mb(),b.Nb(106,"div",50),b.Nb(107,"button",51),b.Jb(108,"i",52),b.kc(109,"\xa0Fechar "),b.Mb(),b.Nb(110,"button",53),b.Ub("click",(function(){return t.onSubmit()})),b.Jb(111,"i",54),b.kc(112," \xa0Confirmar. "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(113,"div"),b.Nb(114,"button",55),b.Jb(115,"i",54),b.kc(116," \xa0Salvar "),b.Mb(),b.Mb(),b.Mb()),2&a&&(b.xb(19),b.ac("formGroup",t.gradeForm),b.xb(14),b.ac("ngForOf",t.calendarios),b.xb(5),b.ac("ngForOf",t.calendarios),b.xb(18),b.ac("ngForOf",t.unidades),b.xb(5),b.ac("ngForOf",t.servicos),b.xb(13),b.lc(t.horaTotal),b.xb(5),b.lc(t.minutoTotal),b.xb(6),b.lc(t.mediaAtenHora),b.xb(6),b.lc(t.totAtend),b.xb(4),b.lc(t.corrVaga))},directives:[s.d,s.c,r.o,r.g,r.d,r.a,r.f,r.c,r.k,e.i,r.i,r.h,r.n],styles:[""]}),a})(),v=(()=>{class a{constructor(a,t,o){this.fb=a,this.gradeService=t,this.globalService=o}ngOnInit(){this.gradeLibForm=this.fb.group({gradeId:["",[r.m.required]]})}liberarGrade(){this.gradeLibForm.valid&&this.gradeService.liberarGrade(this.gradeLibForm.get("gradeId").value).subscribe(a=>{this.globalService.saveShow("Liberada com Sucesso!","Grade")},a=>{this.globalService.alertShow("Alguma coisa errada!","OPS!")})}}return a.\u0275fac=function(t){return new(t||a)(b.Ib(r.b),b.Ib(l.a),b.Ib(u.a))},a.\u0275cmp=b.Cb({type:a,selectors:[["app-grade-liberacao-form"]],decls:48,vars:3,consts:[[1,"col-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],[1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-md"],[1,"h3","border-left","pl-2"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"col-md-8","mb-2"],[1,"card",2,"box-shadow","5px 5px 10px #000"],[1,"card-header"],[1,"row","col-12","ml-1"],["for","nDoTermo"],[1,"card-body"],[1,"row","col-12"],[1,"form-group","col-md-3"],["for","dataIn"],["id","dataIn","type","text","formControlName","gradeId",1,"form-control"],[1,"col-2"],["data-toggle","modal","data-target","#ModalExclusao",1,"btn","btn-info","float-left",3,"disabled"],[1,"fas","fa-trash-alt"],["id","ModalExclusao","tabindex","-1","role","dialog","aria-labelledby","TituloModalCentralizado","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","TituloModalCentralizado",1,"modal-title"],[1,"modal-body",2,"font-weight","bold","font-size","12pt"],[2,"color","blue"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"fas","fa-window-close"],["type","button",1,"btn","btn-success",3,"click"],[1,"far","fa-calendar-alt"]],template:function(a,t){1&a&&(b.Nb(0,"div",0),b.Nb(1,"nav"),b.Nb(2,"ol",1),b.Nb(3,"li",2),b.Nb(4,"a",3),b.kc(5,"In\xedcio"),b.Mb(),b.Mb(),b.Nb(6,"li",4),b.kc(7,"Libera\xe7\xe3o de Grade"),b.Mb(),b.Mb(),b.Mb(),b.Nb(8,"div",5),b.Nb(9,"div",6),b.Nb(10,"h1",7),b.kc(11," Libera\xe7\xe3o de Grade de Agendamento "),b.Mb(),b.Mb(),b.Mb(),b.Nb(12,"form",8),b.Nb(13,"div",9),b.Nb(14,"div",10),b.Nb(15,"div",11),b.Nb(16,"div",12),b.Nb(17,"label",13),b.kc(18,"Filtro para Libera\xe7\xe3o por Grade:"),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"div",14),b.Nb(20,"div",15),b.Nb(21,"div",16),b.Nb(22,"label",17),b.kc(23,"Identificador da Grade:"),b.Mb(),b.Jb(24,"input",18),b.Mb(),b.Nb(25,"div",15),b.Nb(26,"div",19),b.Nb(27,"button",20),b.Jb(28,"i",21),b.kc(29," Liberar Grade "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(30,"div",22),b.Nb(31,"div",23),b.Nb(32,"div",24),b.Nb(33,"div",25),b.Nb(34,"h5",26),b.kc(35," Vamos l\xe1! "),b.Mb(),b.Mb(),b.Nb(36,"div",27),b.kc(37," Numero da Grade n.\xba:"),b.Nb(38,"span",28),b.kc(39),b.Mb(),b.kc(40," ? "),b.Mb(),b.Nb(41,"div",29),b.Nb(42,"button",30),b.Jb(43,"i",31),b.kc(44,"\xa0Fechar "),b.Mb(),b.Nb(45,"button",32),b.Ub("click",(function(){return t.liberarGrade()})),b.Jb(46,"i",33),b.kc(47,"\xa0Liberar "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb()),2&a&&(b.xb(12),b.ac("formGroup",t.gradeLibForm),b.xb(15),b.ac("disabled",!t.gradeLibForm.valid),b.xb(12),b.mc(" ",t.gradeLibForm.get("gradeId").value," "))},directives:[s.d,r.o,r.g,r.d,r.a,r.f,r.c],styles:[""]}),a})();function k(a,t){if(1&a&&(b.Nb(0,"option",37),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.descricao),b.xb(1),b.lc(a.descricao)}}function h(a,t){if(1&a&&(b.Nb(0,"option",37),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.descricao),b.xb(1),b.lc(a.descricao)}}function p(a,t){1&a&&(b.Nb(0,"div",38),b.kc(1,"USE O FILTRO ACIMA PARA GERAR A LISTA."),b.Mb())}function I(a,t){1&a&&(b.Nb(0,"button",50),b.kc(1,"\n                "),b.Jb(2,"i",51),b.kc(3,"\n              "),b.Mb())}function x(a,t){1&a&&(b.Nb(0,"button",52),b.kc(1,"\n                "),b.Jb(2,"i",53),b.kc(3,"\n              "),b.Mb())}function F(a,t){1&a&&(b.Nb(0,"button",54),b.kc(1,"\n                "),b.Jb(2,"i",55),b.kc(3,"\n              "),b.Mb())}function S(a,t){if(1&a){const a=b.Ob();b.Nb(0,"tr"),b.kc(1,"\n            "),b.Nb(2,"td"),b.Nb(3,"strong"),b.kc(4),b.Mb(),b.Mb(),b.kc(5,"\n            "),b.Nb(6,"td"),b.kc(7),b.Xb(8,"date"),b.Mb(),b.kc(9,"\n            "),b.Nb(10,"td"),b.kc(11),b.Mb(),b.kc(12,"\n            "),b.Nb(13,"td"),b.kc(14),b.Mb(),b.kc(15,"\n            "),b.Nb(16,"td"),b.kc(17),b.Mb(),b.kc(18,"\n            "),b.Nb(19,"td"),b.kc(20),b.Mb(),b.kc(21,"\n            "),b.Nb(22,"td"),b.kc(23),b.Mb(),b.kc(24,"\n            "),b.Nb(25,"td"),b.kc(26),b.Mb(),b.kc(27,"\n            "),b.Nb(28,"td"),b.kc(29),b.Mb(),b.kc(30,"\n            "),b.Nb(31,"td"),b.kc(32,"\n              "),b.jc(33,I,4,0,"button",43),b.kc(34,"\n              "),b.jc(35,x,4,0,"button",44),b.kc(36,"\n              "),b.jc(37,F,4,0,"button",45),b.kc(38,"\n            "),b.Mb(),b.kc(39,"\n            "),b.Nb(40,"td"),b.kc(41,"\n              "),b.Nb(42,"button",46),b.Ub("click",(function(){b.dc(a);const o=t.$implicit;return b.Wb(2).onEdit(o.id)})),b.Jb(43,"i",47),b.kc(44,"\n              "),b.Mb(),b.kc(45,"\n              "),b.Nb(46,"button",48),b.Ub("click",(function(){b.dc(a);const o=t.$implicit;return b.Wb(2).gerarAgendamento(o.id)})),b.Jb(47,"i",49),b.kc(48,"\n              "),b.Mb(),b.kc(49,"\n            "),b.Mb(),b.kc(50,"\n          "),b.Mb()}if(2&a){const a=t.$implicit;b.xb(4),b.lc(a.id),b.xb(3),b.lc(b.Zb(8,13,a.calendario.dia,"dd/MM/yyyy")),b.xb(4),b.lc(a.horaInicial),b.xb(3),b.lc(a.horaFinal),b.xb(3),b.lc(a.intervalo),b.xb(3),b.lc(a.correcaoHora),b.xb(3),b.lc(a.quantidade),b.xb(3),b.lc(a.unidade.sigla),b.xb(3),b.lc(a.servico.descricao),b.xb(4),b.ac("ngIf","c"==a.configurado),b.xb(2),b.ac("ngIf","n"==a.gerado),b.xb(2),b.ac("ngIf","g"==a.gerado),b.xb(5),b.ac("disabled","g"==a.gerado)}}function y(a,t){if(1&a&&(b.Nb(0,"div",39),b.kc(1,"\n      "),b.Nb(2,"table",40),b.kc(3,"\n        "),b.Nb(4,"thead"),b.kc(5,"\n          "),b.Nb(6,"tr",41),b.kc(7,"\n            "),b.Nb(8,"th"),b.kc(9,"#"),b.Mb(),b.kc(10,"\n            "),b.Nb(11,"th"),b.kc(12,"Dia"),b.Mb(),b.kc(13,"\n            "),b.Nb(14,"th"),b.kc(15,"Horario Inicial"),b.Mb(),b.kc(16,"\n            "),b.Nb(17,"th"),b.kc(18,"Horario Final"),b.Mb(),b.kc(19,"\n            "),b.Nb(20,"th"),b.kc(21,"Intervalo"),b.Mb(),b.kc(22,"\n            "),b.Nb(23,"th"),b.kc(24,"Corre\xe7\xe3o"),b.Mb(),b.kc(25,"\n            "),b.Nb(26,"th"),b.kc(27,"Total"),b.Mb(),b.kc(28,"\n            "),b.Nb(29,"th"),b.kc(30,"Unidade"),b.Mb(),b.kc(31,"\n            "),b.Nb(32,"th"),b.kc(33,"Servi\xe7o"),b.Mb(),b.kc(34,"\n            "),b.Nb(35,"th"),b.kc(36,"Situa\xe7\xe3o"),b.Mb(),b.kc(37,"\n            "),b.Nb(38,"th"),b.kc(39,"A\xe7\xf5es"),b.Mb(),b.kc(40,"\n          "),b.Mb(),b.kc(41,"\n        "),b.Mb(),b.kc(42,"\n        "),b.Nb(43,"tbody"),b.kc(44,"\n          "),b.jc(45,S,51,16,"tr",42),b.kc(46,"\n        "),b.Mb(),b.kc(47,"\n      "),b.Mb(),b.kc(48,"\n    "),b.Mb()),2&a){const a=b.Wb();b.xb(45),b.ac("ngForOf",a.grades)}}let w=(()=>{class a{constructor(a,t,o,e,i,r,b){this.gradeService=a,this.fb=t,this.unidadeService=o,this.servicoService=e,this.router=i,this.route=r,this.globalService=b,this.mostrarMens=!1,this._id="",this._descricao=""}ngOnInit(){this.comboBox(),this.buscaForm=this.fb.group({unidade:["",[]],dataInicial:["",[]],dataFinal:["",[]],servico:["",[]]})}listGrade(){this.gradeService.listGrade().subscribe(a=>this.grades=a)}pesquisar(){let a=this.buscaForm.get("unidade").value,t=this.buscaForm.get("dataInicial").value,o=this.buscaForm.get("dataFinal").value,e=this.buscaForm.get("servico").value;this.gradeService.buscaAvancada(a,this.primeiroDia(t),this.ultimoDia(o),e).subscribe(a=>this.grades=a)}primeiroDia(a){let t=new Array("01","02","03","04","05","06","07","08","09","10","11","12"),o=new Date;return""==a&&(a=o.getFullYear()+"-"+t[o.getMonth()]+"-01"),a}ultimoDia(a){let t=new Array("01","02","03","04","05","06","07","08","09","10","11","12"),o=new Array("31","28","31","30","31","30","31","31","30","31","30","30"),e=new Date;return""==a&&(a=e.getFullYear()+"-"+t[e.getMonth()]+"-"+o[e.getMonth()]),a}comboBox(){this.unidadeService.listUnidadeGenerica(this.globalService.getRole(),this.globalService.getUnidadeId()).subscribe(a=>this.unidades=a),this.servicoService.listServico().subscribe(a=>this.servicos=a)}onEdit(a){this.router.navigate(["editar",a],{relativeTo:this.route})}gerarAgendamento(a){this.router.navigate(["agendamento/new",a])}}return a.\u0275fac=function(t){return new(t||a)(b.Ib(l.a),b.Ib(r.b),b.Ib(c.a),b.Ib(n.a),b.Ib(s.b),b.Ib(s.a),b.Ib(u.a))},a.\u0275cmp=b.Cb({type:a,selectors:[["app-grade-list"]],decls:122,vars:5,consts:[[1,"col-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],[1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-md"],[1,"h3","border-left","pl-2"],["type","button","routerLink","new",1,"btn","btn-success","float-right"],[1,"fas","fa-user-plus"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"col-12","mb-2"],["type","button","data-toggle","collapse","data-target","#collapseExample","aria-expanded","false","aria-controls","collapseExample",1,"btn","btn-info","mb-2"],["id","collapseExample",1,"collapse"],[1,"card",2,"box-shadow","5px 5px 10px #000"],[1,"card-header"],[1,"row","col-12","ml-1"],["for","nDoTermo"],[1,"card-body"],[1,"row","col-12"],[1,"form-group","col-md-2"],["for","dataIn"],["id","dataIn","type","date","formControlName","dataInicial",1,"form-control"],["for","dataOut"],["id","dataOut","type","date","formControlName","dataFinal",1,"form-control"],[1,"form-group","col-md-4"],["for","unidade"],["id","unidade","formControlName","unidade",1,"form-control"],["value",""],[3,"value",4,"ngFor","ngForOf"],["for","comboServ"],["id","comboServ","formControlName","servico",1,"form-control"],[1,"col-2"],[1,"btn","btn-info","float-left",3,"click"],[1,"fas","fa-search"],["class","d-flex justify-content-center mt-5","style","font-size: 14pt; font-weight: bold;",4,"ngIf"],["id","tbsd","class","table-responsive",4,"ngIf"],[3,"value"],[1,"d-flex","justify-content-center","mt-5",2,"font-size","14pt","font-weight","bold"],["id","tbsd",1,"table-responsive"],[1,"table","table-hover"],[1,"bg-success","text-light"],[4,"ngFor","ngForOf"],["type","button","data-toggle","tooltip","data-placement","top","title","Grade configurada!","class","btn btn-info",4,"ngIf"],["type","button","class","btn btn-danger","data-toggle","tooltip","data-placement","top","title","Vagas n\xe3o geradas!",4,"ngIf"],["type","button","class","btn btn-success","data-toggle","tooltip","data-placement","top","title","Vagas geradas!",4,"ngIf"],["data-toggle","tooltip","data-placement","top","title","Editar grade de atendimento?",1,"btn","btn-outline-info","btn-sm",3,"disabled","click"],[1,"far","fa-edit"],["data-toggle","tooltip","data-placement","top","title","Gerar vagas de agendamento?",1,"btn","btn-outline-success","btn-sm",3,"click"],[1,"fas","fa-list-ol"],["type","button","data-toggle","tooltip","data-placement","top","title","Grade configurada!",1,"btn","btn-info"],[1,"fas","fa-check"],["type","button","data-toggle","tooltip","data-placement","top","title","Vagas n\xe3o geradas!",1,"btn","btn-danger"],[1,"far","fa-hourglass"],["type","button","data-toggle","tooltip","data-placement","top","title","Vagas geradas!",1,"btn","btn-success"],[1,"fas","fa-clipboard-check"]],template:function(a,t){1&a&&(b.Nb(0,"div",0),b.kc(1,"\n    "),b.Nb(2,"nav"),b.kc(3,"\n      "),b.Nb(4,"ol",1),b.kc(5,"\n        "),b.Nb(6,"li",2),b.Nb(7,"a",3),b.kc(8,"In\xedcio"),b.Mb(),b.Mb(),b.kc(9,"\n        "),b.Nb(10,"li",4),b.kc(11,"Listagem"),b.Mb(),b.kc(12,"\n      "),b.Mb(),b.kc(13,"\n    "),b.Mb(),b.kc(14,"\n    "),b.Nb(15,"div",5),b.kc(16,"\n      "),b.Nb(17,"div",6),b.kc(18,"\n        "),b.Nb(19,"h1",7),b.kc(20,"\n          Listagem da Grade de Atendimento\n        "),b.Mb(),b.kc(21,"\n      "),b.Mb(),b.kc(22,"\n      "),b.Nb(23,"div",6),b.kc(24,"\n        "),b.Nb(25,"button",8),b.kc(26,"\n          "),b.Jb(27,"i",9),b.kc(28," Cadastrar Grade\n        "),b.Mb(),b.kc(29,"\n      "),b.Mb(),b.kc(30,"\n    "),b.Mb(),b.kc(31,"\n    "),b.Nb(32,"form",10),b.kc(33,"\n\t\t"),b.Nb(34,"div",11),b.kc(35,"\n      "),b.Nb(36,"button",12),b.kc(37,"\n          Pesquisar Grade de Atendimento\n      "),b.Mb(),b.kc(38,"\n      "),b.Nb(39,"div",13),b.kc(40,"\n      "),b.Nb(41,"div",14),b.kc(42,"\n      "),b.Nb(43,"div",15),b.kc(44,"\n         "),b.Nb(45,"div",16),b.kc(46,"\n          "),b.Nb(47,"label",17),b.kc(48,"Filtro para Listagem das Grades de Atendimento:"),b.Mb(),b.kc(49,"\n        "),b.Mb(),b.kc(50,"\n      "),b.Mb(),b.kc(51,"\n      "),b.Nb(52,"div",18),b.kc(53,"\n      "),b.Nb(54,"div",19),b.kc(55,"\n        "),b.Nb(56,"div",20),b.kc(57,"\n          "),b.Nb(58,"label",21),b.kc(59,"Data Inicial:"),b.Mb(),b.kc(60,"\n          "),b.Jb(61,"input",22),b.kc(62,"\n        "),b.Mb(),b.kc(63,"\n        "),b.Nb(64,"div",20),b.kc(65,"\n          "),b.Nb(66,"label",23),b.kc(67,"Data Final:"),b.Mb(),b.kc(68,"\n          "),b.Jb(69,"input",24),b.kc(70,"\n        "),b.Mb(),b.kc(71,"\n        "),b.Nb(72,"div",25),b.kc(73,"\n          "),b.Nb(74,"label",26),b.kc(75,"Unidades:"),b.Mb(),b.kc(76,"\n          "),b.Nb(77,"select",27),b.kc(78,"\n            "),b.Nb(79,"option",28),b.kc(80,"Nenhum"),b.Mb(),b.kc(81,"\n            "),b.jc(82,k,2,2,"option",29),b.kc(83,"\n          "),b.Mb(),b.kc(84,"\n        "),b.Mb(),b.kc(85,"\n        "),b.Nb(86,"div",25),b.kc(87,"\n            "),b.Nb(88,"label",30),b.kc(89,"Servi\xe7o:"),b.Mb(),b.kc(90,"\n            "),b.Nb(91,"select",31),b.kc(92,"\n                "),b.Nb(93,"option",28),b.kc(94,"Nenhum"),b.Mb(),b.kc(95,"\n                "),b.jc(96,h,2,2,"option",29),b.kc(97,"\n            "),b.Mb(),b.kc(98,"\n        "),b.Mb(),b.kc(99,"\n        "),b.Nb(100,"div",19),b.kc(101,"\n          "),b.Nb(102,"div",32),b.kc(103,"\n            "),b.Nb(104,"button",33),b.Ub("click",(function(){return t.pesquisar()})),b.kc(105,"\n              "),b.Jb(106,"i",34),b.kc(107," Pesquisar\n            "),b.Mb(),b.kc(108,"\n          "),b.Mb(),b.kc(109,"\n        "),b.Mb(),b.kc(110,"\n        "),b.Mb(),b.kc(111,"\n      "),b.Mb(),b.kc(112,"\n      "),b.Mb(),b.kc(113,"\n    "),b.Mb(),b.kc(114,"\n    "),b.Mb(),b.kc(115,"\n  "),b.Mb(),b.kc(116,"\n  "),b.jc(117,p,2,0,"div",35),b.kc(118,"\n     "),b.jc(119,y,49,1,"div",36),b.kc(120,"\n  "),b.Mb(),b.kc(121,"\n\n")),2&a&&(b.xb(32),b.ac("formGroup",t.buscaForm),b.xb(50),b.ac("ngForOf",t.unidades),b.xb(14),b.ac("ngForOf",t.servicos),b.xb(21),b.ac("ngIf",!t.grades),b.xb(2),b.ac("ngIf",t.grades))},directives:[s.d,s.c,r.o,r.g,r.d,r.a,r.f,r.c,r.k,r.h,r.n,e.i,e.j],pipes:[e.d],styles:[""]}),a})();function G(a,t){if(1&a&&(b.Nb(0,"option",57),b.kc(1),b.Mb()),2&a){const a=t.$implicit,o=b.Wb();b.ac("value",a.id),b.xb(1),b.lc(o.formatarDate(a.dia)+" - "+a.observacao)}}function A(a,t){if(1&a&&(b.Nb(0,"option",57),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.id),b.xb(1),b.lc(a.descricao)}}function C(a,t){if(1&a&&(b.Nb(0,"option",57),b.kc(1),b.Mb()),2&a){const a=t.$implicit;b.ac("value",a.id),b.xb(1),b.lc(a.descricao)}}let J=(()=>{class a{constructor(a,t,o,e,i,r,b){this.fb=a,this.servicoService=t,this.unidadeService=o,this.calendarioService=e,this.gradeService=i,this.route=r,this.globalService=b,this.mostrarMens=!1}ngOnInit(){this.comboBox();const a=this.route.snapshot.params;null!=a.id&&this.gradeService.loadById(a.id).subscribe(a=>{this.updateGradeForm(a),this.calcula()}),this.gradeForm=this.fb.group({id:[null,[]],calendario:this.fb.group({id:["",[]],dia:["",[]]}),horaInicial:["",[]],horaFinal:["",[]],intervalo:["",[]],correcaoHora:["",[]],configurado:["",[]],gerado:["",[]],unidade:this.fb.group({id:["",[]],descricao:["",[]]}),servico:this.fb.group({id:["",[]],descricao:["",[]]}),quantidade:["",[]]})}calcula(){let a=this.gradeForm.get("horaInicial").value,t=this.gradeForm.get("horaFinal").value,o=this.gradeForm.get("intervalo").value,e=a.substring(0,2),i=a.substring(3,5),r=60*parseInt(e)+parseInt(i),b=t.substring(0,2),n=t.substring(3,5),c=60*parseInt(b)+parseInt(n)-r,d=c%60,l=c/o,s=c*l/60,u=c/s;this.horaTotal=c/60,this.minutoTotal=d,this.mediaAtenHora=Math.trunc(l),this.totAtend=Math.trunc(s),this.corrVaga=Math.trunc(u),this.gradeForm.get("quantidade").setValue(Math.trunc(s)),this.gradeForm.get("correcaoHora").setValue(Math.trunc(u))}updateGradeForm(a){this.gradeForm.patchValue(a)}formatarDate(a){let t="",o=a.substring(8,10),e=a.substring(5,7),i=a.substring(0,4);return 1==o.length&&(o="0"+o),1==e.length&&(e="0"+e),t=o+"/"+e+"/"+i,t}comboBox(){this.calendarioService.listarDiasAtivos().subscribe(a=>this.calendarios=a),this.unidadeService.listUnidadeGenerica(this.globalService.getRole(),this.globalService.getUnidadeId()).subscribe(a=>this.unidades=a),this.servicoService.listServico().subscribe(a=>this.servicos=a)}onSubmit(){this.gradeForm.valid&&this.gradeService.save(this.gradeForm.value).subscribe(a=>{this.globalService.saveShow("Gerado com Sucesso!","Grade")}),this.gradeForm.reset(),this.horaTotal="",this.minutoTotal="",this.mediaAtenHora="",this.totAtend="",this.corrVaga=""}}return a.\u0275fac=function(t){return new(t||a)(b.Ib(r.b),b.Ib(n.a),b.Ib(c.a),b.Ib(d.a),b.Ib(l.a),b.Ib(s.a),b.Ib(u.a))},a.\u0275cmp=b.Cb({type:a,selectors:[["app-grade-form"]],decls:115,vars:9,consts:[[1,"col-12"],[1,"breadcrumb"],[1,"breadcrumb-item"],["routerLink","/"],["routerLink","/grade"],[1,"breadcrumb-item","active"],[1,"row","mb-4"],[1,"col-md"],[1,"h3","border-left","pl-2"],["type","button","routerLink","/grade",1,"btn","btn-warning","float-right"],[1,"fas","fa-backward"],["novalidate","",1,"needs-validation",3,"formGroup"],[1,"card",2,"box-shadow","5px 5px 10px #000"],[1,"card-header"],[1,"card-body"],[1,"form-row","col-md-12"],[1,"form-group","col-md-3"],["for","id"],["type","text","id","id","formControlName","id","readonly","",1,"form-control"],["formGroupName","calendario"],["for","calendario"],["id","calendario","formControlName","id",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["for","hInicial"],["id","hInicial","type","time","formControlName","horaInicial",1,"form-control"],["for","hFinal"],["id","hFinal","type","time","formControlName","horaFinal",1,"form-control"],[1,"form-group","col-md-2"],["for","inter"],["id","inter","type","number","formControlName","intervalo",1,"form-control",3,"blur"],[1,"form-group","col-md-4"],["formGroupName","unidade"],["for","unidade"],["id","unidade","formControlName","id",1,"form-control"],["formGroupName","servico"],["for","comboServ"],["id","comboServ","formControlName","id",1,"form-control"],["for","quant"],["id","quant","type","number","formControlName","quantidade","readonly","readonly",1,"form-control"],[1,"form-row","col-md-12","d-flex","justify-content-center"],["id","horaTotal",2,"color","blue"],["id","minutoTotal",2,"color","red"],["id","mediaAtenHora",2,"color","green"],["id","totAtend",2,"color","Black"],["id","corrVaga",2,"color","Black"],["id","ModalSalvar","tabindex","-1","role","dialog","aria-labelledby","TituloModalCentralizado","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","TituloModalCentralizado",1,"modal-title"],[1,"modal-body",2,"font-weight","bold"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-danger"],[1,"fas","fa-window-close"],[1,"btn","btn-success",3,"click"],[1,"fas","fa-save"],["type","button","id","modal","data-toggle","modal","data-target","#ModalSalvar",1,"btn","btn-success","float-right","mt-2"],[3,"value"]],template:function(a,t){1&a&&(b.Nb(0,"div",0),b.Nb(1,"nav"),b.Nb(2,"ol",1),b.Nb(3,"li",2),b.Nb(4,"a",3),b.kc(5,"In\xedcio"),b.Mb(),b.Mb(),b.Nb(6,"li",2),b.Nb(7,"a",4),b.kc(8,"Listagem"),b.Mb(),b.Mb(),b.Nb(9,"li",5),b.kc(10,"Grade"),b.Mb(),b.Mb(),b.Mb(),b.Nb(11,"div",6),b.Nb(12,"div",7),b.Nb(13,"h1",8),b.kc(14," Cadastro da Grade de Agendamento "),b.Mb(),b.Mb(),b.Nb(15,"div",7),b.Nb(16,"button",9),b.Jb(17,"i",10),b.kc(18,"\xa0Voltar "),b.Mb(),b.Mb(),b.Mb(),b.Nb(19,"form",11),b.Nb(20,"div",12),b.Nb(21,"div",13),b.kc(22," Formul\xe1rio para cadastro da Grade de Atendimento "),b.Mb(),b.Nb(23,"div",14),b.Nb(24,"div",15),b.Nb(25,"div",16),b.Nb(26,"label",17),b.kc(27,"Identificador:"),b.Mb(),b.Jb(28,"input",18),b.Mb(),b.Nb(29,"div",16),b.Nb(30,"div",19),b.Nb(31,"label",20),b.kc(32,"Calend\xe1rio:"),b.Mb(),b.Nb(33,"select",21),b.jc(34,G,2,2,"option",22),b.Mb(),b.Mb(),b.Mb(),b.Nb(35,"div",16),b.Nb(36,"label",23),b.kc(37,"Hora Inicial:"),b.Mb(),b.Jb(38,"input",24),b.Mb(),b.Nb(39,"div",16),b.Nb(40,"label",25),b.kc(41,"Hora Final:"),b.Mb(),b.Jb(42,"input",26),b.Mb(),b.Mb(),b.Nb(43,"div",15),b.Nb(44,"div",27),b.Nb(45,"label",28),b.kc(46,"Intervalo de aten. (Minutos):"),b.Mb(),b.Nb(47,"input",29),b.Ub("blur",(function(){return t.calcula()})),b.Mb(),b.Mb(),b.Nb(48,"div",30),b.Nb(49,"div",31),b.Nb(50,"label",32),b.kc(51,"Unidades:"),b.Mb(),b.Nb(52,"select",33),b.jc(53,A,2,2,"option",22),b.Mb(),b.Mb(),b.Mb(),b.Nb(54,"div",16),b.Nb(55,"div",34),b.Nb(56,"label",35),b.kc(57,"Servi\xe7o:"),b.Mb(),b.Nb(58,"select",36),b.jc(59,C,2,2,"option",22),b.Mb(),b.Mb(),b.Mb(),b.Nb(60,"div",16),b.Nb(61,"label",37),b.kc(62,"Total de atendimento:"),b.Mb(),b.Jb(63,"input",38),b.Mb(),b.Mb(),b.Nb(64,"div",39),b.Nb(65,"div",16),b.Nb(66,"div",12),b.Nb(67,"div",13),b.kc(68," Resumo da grade. "),b.Mb(),b.Nb(69,"div",14),b.Nb(70,"div",39),b.Nb(71,"strong",40),b.kc(72),b.Mb(),b.Nb(73,"span"),b.kc(74,"\xa0Horas"),b.Mb(),b.Mb(),b.Nb(75,"div",39),b.Nb(76,"strong",41),b.kc(77),b.Mb(),b.Nb(78,"span"),b.kc(79,"\xa0Minutos"),b.Mb(),b.Mb(),b.Nb(80,"div",39),b.kc(81," M\xe9dia: \xa0"),b.Nb(82,"strong",42),b.kc(83),b.Mb(),b.Nb(84,"span"),b.kc(85,"\xa0Atend./Hora"),b.Mb(),b.Mb(),b.Nb(86,"div",39),b.kc(87," Total de atendimento:\xa0"),b.Nb(88,"strong",43),b.kc(89),b.Mb(),b.Mb(),b.Nb(90,"div",39),b.kc(91," Intervalo:\xa0"),b.Nb(92,"strong",44),b.kc(93),b.Mb(),b.Nb(94,"strong"),b.kc(95,"\xa0min"),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(96,"div",45),b.Nb(97,"div",46),b.Nb(98,"div",47),b.Nb(99,"div",48),b.Nb(100,"h5",49),b.kc(101," Vamos l\xe1! "),b.Mb(),b.Mb(),b.Nb(102,"div",50),b.kc(103," Confirmar gera\xe7\xe3o da grade de atendimento? "),b.Mb(),b.Nb(104,"div",51),b.Nb(105,"button",52),b.Jb(106,"i",53),b.kc(107,"\xa0Fechar "),b.Mb(),b.Nb(108,"button",54),b.Ub("click",(function(){return t.onSubmit()})),b.Jb(109,"i",55),b.kc(110," \xa0Confirmar. "),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Mb(),b.Nb(111,"div"),b.Nb(112,"button",56),b.Jb(113,"i",55),b.kc(114," \xa0Salvar "),b.Mb(),b.Mb(),b.Mb()),2&a&&(b.xb(19),b.ac("formGroup",t.gradeForm),b.xb(15),b.ac("ngForOf",t.calendarios),b.xb(19),b.ac("ngForOf",t.unidades),b.xb(6),b.ac("ngForOf",t.servicos),b.xb(13),b.lc(t.horaTotal),b.xb(5),b.lc(t.minutoTotal),b.xb(6),b.lc(t.mediaAtenHora),b.xb(6),b.lc(t.totAtend),b.xb(4),b.lc(t.corrVaga))},directives:[s.d,s.c,r.o,r.g,r.d,r.a,r.f,r.c,r.e,r.k,e.i,r.i,r.h,r.n],styles:[""]}),a})();const T=[{path:"",component:w},{path:"new",component:J},{path:"editar/:id",component:J},{path:"agendamento/new",component:o("/jYa").a},{path:"liberargrade",component:v},{path:"grade/multi",component:f}];let L=(()=>{class a{}return a.\u0275mod=b.Gb({type:a}),a.\u0275inj=b.Fb({factory:function(t){return new(t||a)},imports:[[s.e.forChild(T)],s.e]}),a})(),O=(()=>{class a{}return a.\u0275mod=b.Gb({type:a}),a.\u0275inj=b.Fb({factory:function(t){return new(t||a)},imports:[[e.b,L,r.j,i.b]]}),a})()}}]);